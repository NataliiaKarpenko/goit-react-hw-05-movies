{"version":3,"file":"static/js/902.9fb7aebc.chunk.js","mappings":"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","sources":["components/Reviews/Reviews.styled.js","components/Reviews/Reviews.jsx","Pages/ReviewsPage.jsx","components/APIServices/APIServices.jsx","components/ErrorView/ErrorView.styled.js","components/ErrorView/ErrorView.jsx","components/Pagination/Pagination.styled.js","components/Pagination/Pagination.jsx"],"sourcesContent":["import styled from 'styled-components';\n\nexport const StyledReviews = styled.ul`\n  margin: 0;\n  padding-left: 50px;\n  padding-bottom: 50px;\n  list-style: square;\n  text-align: justify;\n\n  & p {\n    font-style: italic;\n    color: #22313f;\n  }\n`;\n","import PropTypes from 'prop-types';\n\nimport { StyledReviews } from './Reviews.styled';\n\nexport const Reviews = ({ reviewsInfo }) => {\n  return (\n    <StyledReviews>\n      {reviewsInfo.map(({ id, author, content }) => {\n        return (\n          <li key={id}>\n            <h4>{author}</h4>\n            <p>{content}</p>\n          </li>\n        );\n      })}\n    </StyledReviews>\n  );\n};\n\nReviews.propTypes = {\n  reviewsInfo: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      author: PropTypes.string,\n      content: PropTypes.string,\n    })\n  ),\n};\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport { requestMovieReviews } from '../components/APIServices/APIServices';\nimport { Reviews } from '../components/Reviews/Reviews.jsx';\nimport { Loader } from '../components/Loader/Loader';\nimport { ErrorView } from '../components/ErrorView/ErrorView';\nimport { PaginationContainer } from '../components/Pagination/Pagination.jsx';\n\nconst ReviewsPage = () => {\n  const [reviews, setReviews] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [status, setStatus] = useState('idle');\n  const [error, setError] = useState(null);\n  const { movieId } = useParams();\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const page = new URLSearchParams(location.search).get('page') ?? 1;\n\n  useEffect(() => {\n    setStatus('pending');\n    const fetchMovieReviews = async movieId => {\n      try {\n        const { results, total_pages } = await requestMovieReviews(movieId);\n\n        if (results.length === 0) {\n          toast.warning('Sorry, no results found', {\n            toastId: 'error',\n          });\n          setStatus('idle');\n          return;\n        }\n\n        setReviews(results);\n        setTotalPages(total_pages);\n        setStatus('resolved');\n      } catch (error) {\n        console.log(error);\n        setError(`❌ ${error.message}`);\n        setStatus('rejected');\n      }\n    };\n    fetchMovieReviews(movieId);\n    onScrollPage();\n  }, [movieId]);\n\n  const onHandlePage = (event, page) => {\n    navigate({ ...location, search: `page=${page}` });\n  };\n\n  const onScrollPage = () => {\n    // setTimeout(() => {\n    window.scrollBy({\n      top: document.documentElement.clientHeight - 160,\n      behavior: 'smooth',\n    });\n    // }, 1000);\n  };\n\n  return (\n    <>\n      {status === 'pending' && <Loader />}\n\n      {status === 'rejected' && <ErrorView message={error} />}\n\n      {status === 'resolved' && <Reviews reviewsInfo={reviews} />}\n      <ToastContainer\n        autoClose={3000}\n        theme={'colored'}\n        position=\"bottom-center\"\n        limit={1}\n      />\n      {totalPages > 1 && (\n        <PaginationContainer\n          count={totalPages}\n          onChange={onHandlePage}\n          page={Number(page)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ReviewsPage;\n","import axios from 'axios';\n\nconst URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '60bdd84997c9f2a4c6cd2341c547ed98';\nconst REQUEST = {\n  trendingMovies: '/trending/movie/day',\n  moviesByQuery: '/search/movie',\n  movie: '/movie',\n  credits: '/credits',\n  reviews: '/reviews',\n  lang: 'language=en-US',\n  restrictions: 'include_adult=false',\n};\n\nexport const requestTrendingMovies = async page => {\n  const trendingMoviesResponse = await axios.get(\n    `${URL}${REQUEST.trendingMovies}?api_key=${API_KEY}&page=${page}&${REQUEST.restrictions}`\n  );\n\n  const { data } = trendingMoviesResponse;\n\n  return data;\n};\n\nexport const requestMoviesByQuery = async (query, page) => {\n  // https://api.themoviedb.org/3/search/movie?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\n  const moviesByQueryResponse = await axios.get(\n    `${URL}${REQUEST.moviesByQuery}?api_key=${API_KEY}&${REQUEST.lang}&${REQUEST.restrictions}&query=${query}&page=${page}`\n  );\n\n  const { data } = moviesByQueryResponse;\n\n  return data;\n};\n\nexport const requestMovieInfo = async id => {\n  // https://api.themoviedb.org/3/movie/{movie_id}?api_key=<<api_key>>&language=en-US\n  const movieInfoResponse = await axios.get(\n    `${URL}${REQUEST.movie}/${id}?api_key=${API_KEY}&${REQUEST.lang}`\n  );\n\n  const { data } = movieInfoResponse;\n\n  return data;\n};\n\nexport const requestMovieCredits = async id => {\n  // https://api.themoviedb.org/3/movie/{movie_id}/credits?api_key=<<api_key>>&language=en-US\n  const moviesCreditsResponse = await axios.get(\n    `${URL}${REQUEST.movie}/${id}${REQUEST.credits}?api_key=${API_KEY}&${REQUEST.lang}`\n  );\n\n  const { data } = moviesCreditsResponse;\n  const moviesCreditsArr = data.cast;\n  return moviesCreditsArr;\n};\n\nexport const requestMovieReviews = async (id, page = 1) => {\n  // https://api.themoviedb.org/3/movie/{movie_id}/reviews?api_key=<<api_key>>&language=en-US&page=1\n  const movieReviewsResponse = await axios.get(\n    `${URL}${REQUEST.movie}/${id}${REQUEST.reviews}?api_key=${API_KEY}&${REQUEST.lang}&page=${page}`\n  );\n\n  const { data } = movieReviewsResponse;\n\n  return data;\n};\n","import styled from 'styled-components';\n\nexport const StyledErrorView = styled.div`\n  position: absolute;\n  bottom: 10;\n  left: 50%;\n  transform: translate(-50%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & img {\n    width: 300px;\n    height: auto;\n    margin-bottom: 15px;\n  }\n\n  & p {\n    font-size: 18px;\n    color: #34495e;\n  }\n`;\n","import PropTypes from 'prop-types';\n\nimport errorImg from '../../images/errorImg.jpeg';\nimport { StyledErrorView } from './ErrorView.styled';\n\nexport const ErrorView = ({ message }) => {\n  return (\n    <StyledErrorView>\n      <img src={errorImg} alt=\"red button\" width=\"300\" />\n      <p>{message}</p>\n    </StyledErrorView>\n  );\n};\n\nErrorView.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import styled from 'styled-components';\n\nexport const StyledPagination = styled.div`\n  // margin-right: auto;\n  // margin-left: auto;\n  display: flex;\n  justify-content: center;\n  margin-bottom: 40px;\n`;\n","import { Pagination } from '@mui/material';\n\nimport { StyledPagination } from './Pagination.styled';\n\nexport const PaginationContainer = ({ count, page, onChange }) => {\n  return (\n    <StyledPagination>\n      <Pagination\n        count={count}\n        onChange={onChange}\n        page={page}\n        showFirstButton\n        showLastButton\n        size=\"large\"\n      />\n    </StyledPagination>\n  );\n};\n"],"names":["StyledReviews","styled","Reviews","reviewsInfo","map","id","author","content","useState","reviews","setReviews","totalPages","setTotalPages","status","setStatus","error","setError","movieId","useParams","navigate","useNavigate","location","useLocation","page","URLSearchParams","search","get","useEffect","fetchMovieReviews","requestMovieReviews","results","total_pages","length","toast","toastId","console","log","message","onScrollPage","window","scrollBy","top","document","documentElement","clientHeight","behavior","Loader","ErrorView","autoClose","theme","position","limit","Pagination","count","onChange","event","Number","URL","API_KEY","REQUEST","requestTrendingMovies","axios","trendingMoviesResponse","data","requestMoviesByQuery","query","moviesByQueryResponse","requestMovieInfo","movieInfoResponse","requestMovieCredits","moviesCreditsResponse","moviesCreditsArr","cast","movieReviewsResponse","StyledErrorView","src","errorImg","alt","width","StyledPagination","PaginationContainer","showFirstButton","showLastButton","size"],"sourceRoot":""}